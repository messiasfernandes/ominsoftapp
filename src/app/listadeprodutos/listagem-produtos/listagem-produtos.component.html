<div class="container">
  <div class="card">
    <div class="grid">
      <div class="col-12 md:col-6 lg:col-3">
        <h2>Consulta Produto</h2>
      </div>
    </div>

    <div class="p-fluid grid">
      <div class="col-6 md:col-6 lg:col-4 p-fluid">
        <form autocomplete="off" (ngSubmit)="buscar()">
          <span class="p-float-label">
            <span class="p-float-label p-input-icon-right">
              <i class="pi pi-search"></i>
              <input
                type="text"
                id="inputgroup"
                name="paramentro"
                pInputText
                [(ngModel)]="produtofiltro.parametro"
                class="p-inputtext"
                placeholder="id, nome do produto, cÃ³digo ean 13"
              />
              <label for="inputgroup">Pesquisar</label>
            </span>
          </span>
        </form>
      </div>
    </div>
    <div class="grid">
      <div class="col-12 tabela">

        <p-table [value]="produtos" dataKey="id" >
          <ng-template pTemplate="header">
              <tr>
                  <th style="width: 5rem"></th>
                  <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>

                  <th pSortableColumn="price">Price <p-sortIcon field="price"></p-sortIcon></th>
                  <th pSortableColumn="category">Category <p-sortIcon field="category"></p-sortIcon></th>
                  <th pSortableColumn="rating">Reviews <p-sortIcon field="rating"></p-sortIcon></th>
                  <th pSortableColumn="inventoryStatus">Status <p-sortIcon field="inventoryStatus"></p-sortIcon></th>
              </tr>
          </ng-template>
          <ng-template pTemplate="body" let-product let-expanded="expanded">
              <tr>
                  <td>
                      <button type="button" pButton pRipple [pRowToggler]="product" class="p-button-text p-button-rounded p-button-plain" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
                  </td>
                  <td>{{ product.name }}</td>

                  <td>{{ product.price | currency: 'BRL' }}</td>
                  <td>{{ product.category }}</td>


              </tr>
          </ng-template>
          <ng-template pTemplate="rowexpansion" let-product>
              <tr>
                  <td colspan="7">
                      <div class="p-3">
                          <p-table [value]="product.orders" dataKey="id">
                              <ng-template pTemplate="header">
                                  <tr>
                                      <th pSortableColumn="id">Id <p-sortIcon field="price"></p-sortIcon></th>
                                      <th pSortableColumn="customer">Customer <p-sortIcon field="customer"></p-sortIcon></th>
                                      <th pSortableColumn="date">Date <p-sortIcon field="date"></p-sortIcon></th>
                                      <th pSortableColumn="amount">Amount <p-sortIcon field="amount"></p-sortIcon></th>

                                      <th style="width: 4rem"></th>
                                  </tr>
                              </ng-template>
                              <ng-template pTemplate="body" let-produtoSku>
                                  <tr>
                                      <td>{{ produtoSku.id }}</td>
                                      <td>{{ produtoSku.nomeProduto }}</td>
                                      <td>{{ produtoSku.id }}</td>
                                      <td>{{ produtoSku.pr | currency: 'USD' }}</td>

                                      <td><p-button type="button" icon="pi pi-plus"></p-button></td>
                                  </tr>
                              </ng-template>
                              <ng-template pTemplate="emptymessage">
                                  <tr>
                                      <td colspan="6">There are no order for this product yet.</td>
                                  </tr>
                              </ng-template>
                          </p-table>
                      </div>
                  </td>
              </tr>
          </ng-template>
      </p-table>

      </div>
    </div>
  </div>
</div>
